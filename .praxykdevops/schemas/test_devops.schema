{
  "tables": ["Users", "Providers", "Images", "Regions", "Instances", "Snapshots", "Tokens", "Auth", "SSHKeys"],
  "rows": {
    "Users"     : ["username VARCHAR(30) PRIMARY KEY",
                   "pwhash CHAR(128)",
                   "email VARCHAR(100)"],
    "Providers" : ["name VARCHAR(20) PRIMARY KEY"],
    "Images"    : ["id VARCHAR(25) PRIMARY KEY",
                   "name VARCHAR(50) NOT NULL",
                   "slug VARCHAR(50) NOT NULL",
                   "distro VARCHAR(40)"],
    "Regions"   : ["slug VARCHAR(15) PRIMARY KEY"],
    "Instances" : ["id VARCHAR(20) PRIMARY KEY",
                   "name VARCHAR(50)",
                   "image VARCHAR(25)",
                   "ip VARCHAR(20)",
                   "ipv6 VARCHAR(35)",
                   "class VARCHAR(10) NOT NULL",
                   "disk VARCHAR(10) NOT NULL",
                   "region VARCHAR(15) NOT NULL",
                   "status VARCHAR(15)",
                   "creator VARCHAR(30)",
                   "created_at DATETIME",
                   "provider VARCHAR(20) NOT NULL",
                   "FOREIGN KEY (creator) REFERENCES Users(username)",
                   "FOREIGN KEY (region) REFERENCES Regions(slug)"],
    "Snapshots" : ["name varchar(40)",
                   "id VARCHAR(40) PRIMARY KEY",
                   "instancename VARCHAR(50)",
                   "created_at DATETIME",
                   "provider VARCHAR(20)",
                   "description TEXT",
                   "region VARCHAR(10)",
                   "FOREIGN KEY (region) REFERENCES Regions(slug)",
                   "FOREIGN KEY (provider) REFERENCES Providers(name)"],
    "Tokens"    : ["val CHAR(128) PRIMARY KEY",
                    "user VARCHAR(30)",
                    "created_at DATETIME",
                    "expires_at DATETIME",
                    "FOREIGN KEY (user) REFERENCES Users(username)"],
    "SSHKeys"   : ["id VARCHAR(40) PRIMARY KEY",
                   "user VARCHAR(30)",
                   "name VARCHAR(100)",
                   "pubkey TEXT",
                   "fingerprint VARCHAR(100)",
                   "FOREIGN KEY (user) REFERENCES Users(username)"],
    "Auth"       : ["user VARCHAR(30) PRIMARY KEY",
                   "level INT",
                    "FOREIGN KEY (user) REFERENCES Users(username)"]
  },
  "indexes" : {
    "Users"     : [],
    "Instances" : [["created_at_ind", "created_at"], ["provider_ind", "provider"] ],
    "Snapshots" : [["created_at_ind", "created_at"], ["provider_ind", "provider"]],
    "Images"    : [["name_ind", "name"]],
    "Tokens"    : [["user_ind", "user"], ["created_ind", "created_at"], ["expires_ind", "expires_at"]],
    "Providers" : [],
    "SSHKeys"   : [["id_ind", "id"], ["user_ind", "user"]],
    "Auth"      : [["level_ind", "level"]]
  },
  "dbname": "test",
  "file": "test_devops.schema"
}
